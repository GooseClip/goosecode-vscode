{
  "name": "goosecode",
  "displayName": "goosecode",
  "description": "Companion AI powered infinity canvas app",
  "version": "0.0.1",
  "publisher": "GooseClip",
  "engines": {
    "vscode": "^1.77.0"
  },
  "private": true,
  "categories": [
    "Other"
  ],
  "__comment1__": "// TODO remove the * activation event in prod, it only exists for testing purposes",
  "activationEvents": [
    "*"
  ],
  "main": "./dist/extension.js",
  "contributes": {
    "viewsWelcome": [
      {
        "view": "goosecode.connection",
        "contents": "GooseCode extension is not running.\n[Click here](command:goosecode.enableAutoStart) if you want GooseCode to start automatically.\nOtherwise [start for this session](command:goosecode.start).\nPlease view the walkthrough for detailed instructions.\n[Walkthrough](command:goosecode.openWalkthrough)",
        "when": "goosecode.started == false"
      },
      {
        "view": "goosecode.connection",
        "contents": "Creating a [GooseCode](https://goosecode.app) Connection:\nCheck or update connection details in [Settings](command:getting-started-goosecode.checkSettings).\nConnect via the GooseCode IDE controls pane.\nPlease view the walkthrough for detailed instructions.\n[Walkthrough](command:goosecode.openWalkthrough)",
        "when": "goosecode.started == true && goosecode.initialized == false"
      },
      {
        "view": "goosecode.codeSources",
        "contents": "Open a workspace to configure your code sources."
      }
    ],
    "viewsContainers": {
      "activitybar": [
        {
          "id": "goosecode",
          "title": "GooseCode",
          "icon": "resources/icon.svg"
        }
      ]
    },
    "views": {
      "goosecode": [
        {
          "id": "goosecode.connection",
          "name": "Connection"
        },
        {
          "id": "goosecode.codeSources",
          "name": "Code Sources"
        },
        {
          "id": "goosecode.activeSession",
          "name": "Active Session",
          "when": "goosecode.initialized == true"
        }
      ]
    },
    "keybindings": [
      {
        "command": "goosecode.follow",
        "key": "alt+ctrl+g",
        "mac": "alt+cmd+g",
        "when": "editorTextFocus"
      }
    ],
    "commands": [
      {
        "command": "goosecode.appcommand.minimap",
        "title": "Toggle Minimap",
        "category": "GooseCode"
      },
      {
        "command": "goosecode.appcommand.overlay",
        "title": "Toggle Overlay",
        "category": "GooseCode"
      },
      {
        "command": "goosecode.codeSources.refresh",
        "title": "Refresh Code Sources",
        "icon": {
          "light": "resources/light/refresh.svg",
          "dark": "resources/dark/refresh.svg"
        }
      },
      {
        "command": "goosecode.activeSession.delete",
        "title": "Discard Session",
        "icon": {
          "light": "resources/light/delete.svg",
          "dark": "resources/dark/delete.svg"
        }
      },
      {
        "command": "goosecode.activeSession.save",
        "title": "Save Session",
        "icon": {
          "light": "resources/light/save.svg",
          "dark": "resources/dark/save.svg"
        }
      },
      {
        "command": "goosecode.activeSession.regenerateLinear",
        "title": "Regenerate Session (Linear)",
        "icon": {
          "light": "resources/light/linear.svg",
          "dark": "resources/dark/linear.svg"
        }
      },
      {
        "command": "goosecode.activeSession.regenerateSwimlane",
        "title": "Regenerate Session (Swimlane)",
        "icon": {
          "light": "resources/light/swimlane.svg",
          "dark": "resources/dark/swimlane.svg"
        }
      },
      {
        "command": "goosecode.activeSession.step",
        "title": "Step Through Session",
        "icon": {
          "light": "resources/light/step.svg",
          "dark": "resources/dark/step.svg"
        }
      },
      {
        "command": "goosecode.codeSources.enableCodeSource",
        "title": "Enable CodeSource",
        "icon": {
          "light": "resources/light/toggle_off.svg",
          "dark": "resources/dark/toggle_off.svg"
        }
      },
      {
        "command": "goosecode.codeSources.disableCodeSource",
        "title": "Disable CodeSource",
        "icon": {
          "light": "resources/light/toggle_on.svg",
          "dark": "resources/dark/toggle_on.svg"
        }
      },
      {
        "command": "goosecode.start",
        "title": "Start",
        "category": "GooseCode",
        "icon": {
          "light": "resources/light/toggle_on.svg",
          "dark": "resources/dark/toggle_on.svg"
        }
      },
      {
        "command": "goosecode.stop",
        "title": "Stop",
        "category": "GooseCode",
        "icon": {
          "light": "resources/light/toggle_on.svg",
          "dark": "resources/dark/toggle_on.svg"
        }
      },
      {
        "command": "goosecode.restart",
        "title": "Restart",
        "category": "GooseCode"
      },
      {
        "command": "goosecode.purgeTLS",
        "title": "Purge TLS Certificates",
        "category": "GooseCode"
      },
      {
        "command": "goosecode.open",
        "title": "Open In GooseCode",
        "category": "GooseCode"
      },
      {
        "command": "goosecode.pin",
        "title": "Pin",
        "category": "GooseCode"
      },
      {
        "command": "goosecode.snippet",
        "title": "Snippet",
        "category": "GooseCode"
      },
      {
        "command": "goosecode.follow",
        "title": "Follow",
        "category": "GooseCode"
      }
    ],
    "menus": {
      "view/title": [
        {
          "command": "goosecode.codeSources.refresh",
          "group": "navigation",
          "when": "view == goosecode.codeSources"
        },
        {
          "command": "goosecode.activeSession.delete",
          "group": "navigation@1",
          "when": "view == goosecode.activeSession"
        },
        {
          "command": "goosecode.activeSession.save",
          "group": "navigation@2",
          "when": "view == goosecode.activeSession"
        },
        {
          "command": "goosecode.activeSession.regenerateLinear",
          "group": "navigation@3",
          "when": "view == goosecode.activeSession"
        },
        {
          "command": "goosecode.activeSession.regenerateSwimlane",
          "group": "navigation@4",
          "when": "view == goosecode.activeSession"
        },
        {
          "command": "goosecode.activeSession.step",
          "group": "navigation@5",
          "when": "view == goosecode.activeSession"
        }
      ],
      "view/item/context": [
        {
          "command": "goosecode.start",
          "group": "inline",
          "when": "viewItem == disabled && view == goosecode.connection"
        },
        {
          "command": "goosecode.stop",
          "group": "inline",
          "when": "viewItem == enabled && view == goosecode.connection"
        },
        {
          "command": "goosecode.codeSources.enableCodeSource",
          "group": "inline",
          "when": "viewItem == disabled && view == goosecode.codeSources"
        },
        {
          "command": "goosecode.codeSources.disableCodeSource",
          "group": "inline",
          "when": "viewItem == enabled && view == goosecode.codeSources"
        }
      ],
      "editor/context": [
        {
          "submenu": "goosecode.submenu",
          "group": "goosecode"
        }
      ],
      "goosecode.submenu": [
        {
          "when": "editorTextFocus",
          "command": "goosecode.open",
          "group": "goosecode@1"
        },
        {
          "when": "editorTextFocus",
          "command": "goosecode.pin",
          "group": "goosecode@3"
        },
        {
          "when": "editorHasSelection",
          "command": "goosecode.snippet",
          "group": "goosecode@4"
        },
        {
          "when": "editorTextFocus",
          "command": "goosecode.follow",
          "group": "goosecode@6"
        },
        {
          "command": "goosecode.appcommand.minimap",
          "group": "goosecode@7"
        },
        {
          "command": "goosecode.appcommand.overlay",
          "group": "goosecode@8"
        }
      ]
    },
    "submenus": [
      {
        "id": "goosecode.submenu",
        "label": "GooseCode"
      }
    ],
    "walkthroughs": [
      {
        "id": "goosecode",
        "title": "GooseCode",
        "description": "GooseCode extension to be used with [GooseCode App](https://goosecode.app) to supercharge code navigation.",
        "steps": [
          {
            "id": "download",
            "title": "Download GooseCode",
            "description": "Download GooseCode from the [GooseCode App](https://goosecode.app) website. Available for Windows, Mac, and iPadOS.\n[I have GooseCode](command:getting-started-goosecode.downloadComplete)",
            "media": {
              "image": "media/walkthrough_download_goosecode.png",
              "altText": "Image of GooseCode"
            },
            "completionEvents": [
              "onCommand:getting-started-goosecode.downloadComplete"
            ]
          },
          {
            "id": "checksettings",
            "title": "Check Extension Setting",
            "description": "We recommend enabling 'Start Automatically'.\nView or modify your connection details used to connect with GooseCode in the next step.\n[Settings](command:getting-started-goosecode.checkSettings)",
            "media": {
              "markdown": "media/walkthrough_settings.md"
            },
            "completionEvents": [
              "onCommand:getting-started-goosecode.checkSettings"
            ]
          },
          {
            "id": "startingextension",
            "title": "Start Extension Server",
            "description": "The GooseCode extension uses a secure https server with password protection.\n[Start](command:goosecode.start)",
            "media": {
              "markdown": "media/walkthrough_starting_extension_server.md"
            },
            "completionEvents": [
              "onContext:goosecode.started"
            ]
          },
          {
            "id": "firstconnection",
            "title": "Connecting GooseCode",
            "description": "Create a new project in GooseCode and open the IDE control pane.\nEnter your details found in [Settings](command:getting-started-goosecode.checkSettings).\n[Copy Password](command:getting-started-goosecode.copyPassword)",
            "media": {
              "image": "media/walkthrough_first_connection.gif",
              "altText": "Gif demonstrating your first connection"
            },
            "completionEvents": [
              "onCommand:getting-started-goosecode.copyPassword",
              "onContext:goosecode.initialized"
            ]
          },
          {
            "id": "testconnection",
            "title": "Test Connection",
            "description": "Waiting for connection from GooseCode.",
            "media": {
              "image": "media/walkthrough_testing_connection.svg",
              "altText": "Connect icon"
            },
            "completionEvents": [
              "onContext:goosecode.initialized"
            ]
          },
          {
            "id": "openactivitybar",
            "title": "Open Activity Bar",
            "description": "Click the GooseCode icon in the left activity bar. Here you can manage your code sources and connection state.",
            "media": {
              "image": "media/walkthrough_open_activity_bar.gif",
              "altText": "Gif demonstrating opening the activity bar"
            },
            "completionEvents": [
              "onContext:goosecode.treeview.codeSources.visible"
            ]
          },
          {
            "id": "aboutcodesources",
            "title": "About Code Sources",
            "description": "Code sources are workspaces which have been initialized to be used with GooseCode.\n[I Understand](command:getting-started-goosecode.aboutCodeSources)",
            "media": {
              "markdown": "media/walkthrough_about_code_sources.md"
            },
            "completionEvents": [
              "onCommand:getting-started-goosecode.aboutCodeSources"
            ]
          },
          {
            "id": "enablecodesource",
            "title": "Enable a Code Source",
            "description": "Hover over a code source entry and click the toggle button to enable it.\n[Enable All](command:getting-started-goosecode.enableAllCodeSources)",
            "media": {
              "image": "media/walkthrough_enabling_code_sources.gif",
              "altText": "Gif demonstrating enabling a code source"
            },
            "completionEvents": [
              "onContext:goosecode.hasActiveCodeSources"
            ]
          },
          {
            "id": "firstcommand",
            "title": "Your First Command",
            "description": "Open a code file.\nRight click > GooseCode > Open in GooseCode.",
            "media": {
              "image": "media/walkthrough_first_command.gif",
              "altText": "Gif demonstrating opening a file"
            },
            "completionEvents": [
              "onCommand:goosecode.open"
            ]
          },
          {
            "id": "generationcommands",
            "title": "Generating Commands",
            "description": "Unleash the full potential of GooseCode by using the 'follow' command. GooseCode will generate snippets of code as you navigate through your codebase.\nEither use the context menu 'follow' or the keyboard shortcut 'alt+ctrl+g' (windows) or 'cmd+option+g' (mac).\nThe works much in the same way as the built in 'go to definition' command.\nCurrently there are two strategies for generating snippets, linear and swimlane.",
            "media": {
              "image": "media/walkthrough_generation_commands.gif",
              "altText": "Gif demonstrating GooseCode follow"
            },
            "completionEvents": [
              "onCommand:goosecode.follow"
            ]
          },
          {
            "id": "linearstrategy",
            "title": "Linear Strategy",
            "description": "Linear generation strategy will generate in a row as you navigate through your codebase. Snippets from the same file will stack until a new file is added.\nWhen a file is revisited, it will add a new column rather than returning to previous references.\nThis enables us to sequentially track code execution as well as include relevant references to interesting bits of code.\n[I Understand](command:getting-started-goosecode.linearStrategy)",
            "media": {
              "image": "media/walkthrough_linear_strategy.png",
              "altText": "Image demonstrating linear generation strategy"
            },
            "completionEvents": [
              "onCommand:getting-started-goosecode.linearStrategy"
            ]
          },
          {
            "id": "swimlanestrategy",
            "title": "Swimlane Strategy",
            "description": "Swimlane generation strategy will generate in columns according to the containing file. This is great for understanding inter-file dependencies in a familiar format.\nCurrently swimlane doesn't support references as they're hard to understand in this format.\n[I Understand](command:getting-started-goosecode.swimlaneStrategy)",
            "media": {
              "image": "media/walkthrough_swimlane_strategy.png",
              "altText": "Image demonstrating swimlane generation strategy"
            },
            "completionEvents": [
              "onCommand:getting-started-goosecode.swimlaneStrategy"
            ]
          },
          {
            "id": "generationcontrols",
            "title": "About Generation",
            "description": "When you first generate using the 'follow' command, a 'session' is started.\nThe benefit of this is we can update our generation preferences in GooseCode and regenerate.\nWe can also step back through the flow incrementally to review, or remove events before regenerating. You can even swap between linear and swimlane.\nWhen you're satisfied with the result, hit the save button or discard the session to delete all snippets.\n[I Understand](command:getting-started-goosecode.aboutGeneration)",
            "media": {
              "image": "media/walkthrough_generation_controls.gif",
              "altText": "Gif demonstrating generation controls"
            },
            "completionEvents": [
              "onCommand:getting-started-goosecode.aboutGeneration"
            ]
          },
          {
            "id": "minimap",
            "title": "Your Coding Minimap",
            "description": "You can use GooseCode as a minimap for your codebase to quickly view important snippets of code.\nHit the 'm' key within GooseCode or run the Minimap command in VSCode and GooseCode will overlay your window.\nClick on your snippets within the minimap to open the relevant sections within your codebase.\nMinimap mode has a few keyboard shortcuts but be sure to focus on the floating window before pushing them.\nZoom (z): Quickly preview snippets while zoomed out so you know which one to click.\nFocus (f): Focus on the cursor, useful for navigating quickly around the map.\nYou can resize and reposition your minimap and it will restore to the original size and position on exit.\nIf you prefer a fully functional GooseCode overlayed, you can try Overlay (o) mode instead.\n[Wow](command:getting-started-goosecode.minimap)",
            "media": {
              "image": "media/walkthrough_minimap.gif",
              "altText": "Gif demonstrating GooseCode minimap"
            },
            "completionEvents": [
              "onCommand:getting-started-goosecode.minimap"
            ]
          }
        ]
      }
    ],
    "configuration": {
      "title": "GooseCode",
      "properties": {
        "goosecode.startAutomatically": {
          "description": "Start GooseCode Extension server automatically on open.",
          "type": "boolean",
          "default": false
        },
        "goosecode.connections.port": {
          "description": "The port GooseCode will connect to the IDE.",
          "type": "number",
          "default": 60053
        },
        "goosecode.connections.localhostOnly": {
          "description": "Allow only localhost devices to connect.",
          "type": "boolean",
          "default": true
        },
        "goosecode.connections.password": {
          "description": "Password protection to prevent unwanted connections.",
          "type": "string",
          "default": ""
        }
      }
    }
  },
  "scripts": {
    "vscode:prepublish": "yarn run package",
    "compile": "webpack",
    "watch": "webpack --watch",
    "package": "webpack --mode production --devtool hidden-source-map",
    "compile-tests": "tsc -p . --outDir out",
    "watch-tests": "tsc -p . -w --outDir out",
    "pretest": "yarn run compile-tests && yarn run compile && yarn run lint",
    "lint": "eslint src --ext ts",
    "test": "node ./out/test/runTest.js"
  },
  "devDependencies": {
    "@types/express": "^4.17.17",
    "@types/express-serve-static-core": "^4.17.35",
    "@types/express-ws": "^3.0.1",
    "@types/glob": "^8.1.0",
    "@types/mocha": "^10.0.1",
    "@types/node": "16.x",
    "@types/node-forge": "^1.3.11",
    "@types/uuid": "^10.0.0",
    "@types/vscode": "^1.77.0",
    "@types/ws": "^8.5.4",
    "@typescript-eslint/eslint-plugin": "^5.59.1",
    "@typescript-eslint/parser": "^5.59.1",
    "@vscode/test-electron": "^2.3.0",
    "eslint": "^8.39.0",
    "glob": "^8.1.0",
    "mocha": "^10.2.0",
    "ts-loader": "^9.4.2",
    "typescript": "^5.0.4",
    "webpack": "^5.81.0",
    "webpack-cli": "^5.0.2"
  },
  "dependencies": {
    "express": "^4.18.2",
    "express-ws": "^5.0.2",
    "google-protobuf": "^3.21.2",
    "monaco-editor": "^0.39.0",
    "node-forge": "^1.3.1",
    "smol-toml": "^1.3.0",
    "uuid": "^10.0.0",
    "ws": "^8.13.0"
  }
}
